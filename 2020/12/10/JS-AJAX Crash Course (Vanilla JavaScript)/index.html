<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="author" content="Chieh Liu"><title>JS-AJAX Crash Course  | Chieh Liu&#39;s Blog</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><script src="/js/script.js"></script><script src="/js/tocbot.min.js"></script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Chieh Liu's Blog" type="application/atom+xml">
</head><body><div class="wrapper"><header><nav class="navbar"><div class="container"><div class="navbar-header header-logo"><a href="/">Chieh Liu&#39;s Blog</a></div><div class="menu navbar-right"><a class="menu-item" href="/archives">Posts</a> <a class="menu-item" href="/category">Categories</a> <a class="menu-item" href="/tag">Tags</a> <a class="menu-item" href="/about">About</a> <input id="switch_default" type="checkbox" class="switch_default"> <label for="switch_default" class="toggleBtn"></label></div></div></nav><nav class="navbar-mobile" id="nav-mobile"><div class="container"><div class="navbar-header"><div><a href="/">Chieh Liu&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a></div><div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div></div><div class="menu" id="mobile-menu"><a class="menu-item" href="/archives">Posts</a> <a class="menu-item" href="/category">Categories</a> <a class="menu-item" href="/tag">Tags</a> <a class="menu-item" href="/about">About</a></div></div></nav></header><script>var mobileBtn=function(){var e=document.getElementsByClassName("menu-toggle")[0],t=document.getElementById("mobile-menu");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}</script><div class="main"><div class="container"><div class="post-toc"><div class="tocbot-list"></div><div class="tocbot-list-menu"><a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a> <a onclick="go_top()">Back to top</a> <a onclick="go_bottom()">Go to bottom</a></div></div><script>function expand_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:6,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","collapse_toc()"),o.innerHTML="Collapse all"}function collapse_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","expand_toc()"),o.innerHTML="Expand all"}function go_top(){window.scrollTo(0,0)}function go_bottom(){window.scrollTo(0,document.body.scrollHeight)}document.ready((function(){tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0})}))</script><article class="post-wrap"><header class="post-header"><h1 class="post-title">JS-AJAX Crash Course </h1><div class="post-meta">Author: <a itemprop="author" rel="author" href="/">Chieh Liu</a> <span class="post-time">Date: <a href="#">December 10, 2020&nbsp;&nbsp;10:27:20</a> </span><span class="post-category">Category: <a href="/categories/Javascript/">Javascript</a></span></div></header><div class="post-content"><h1 id="AJAX-Crash-Course-Vanilla-JavaScript"><a href="#AJAX-Crash-Course-Vanilla-JavaScript" class="headerlink" title="AJAX Crash Course (Vanilla JavaScript)"></a>AJAX Crash Course (Vanilla JavaScript)</h1><hr><h2 id="tags-Javascript-relate"><a href="#tags-Javascript-relate" class="headerlink" title="tags: Javascript relate"></a>tags: Javascript relate</h2><h6 id="tags-Javascript"><a href="#tags-Javascript" class="headerlink" title="tags: Javascript"></a>tags: <code>Javascript</code></h6><h1 id="AJAX是甚麼"><a href="#AJAX是甚麼" class="headerlink" title="AJAX是甚麼?"></a>AJAX是甚麼?</h1><ul><li>Asynchronous Javascript&amp;XML<blockquote><p>不是種語言、框架、函式庫只是一種網頁工具用來傳送、接收來自客戶端的資料給伺服器用一種非同步的處理方式那就是AJAX</p></blockquote></li><li>簡單來說就是處理這些發送的動作在看不到的狀況下同時不需要重新下載頁面</li><li>諷刺的地方是雖然命名有被使用到但是 XML相當少使用，比較多使用JSON(Javascript Object Notation)因為比較簡潔快速且受歡迎</li><li>單純的text也可以被使用</li></ul><h2 id="圖解AJAX"><a href="#圖解AJAX" class="headerlink" title="圖解AJAX"></a>圖解AJAX</h2><p><img src="https://i.imgur.com/TKMLQTR.png"></p><h3 id="Common-Request-amp-Response"><a href="#Common-Request-amp-Response" class="headerlink" title="Common Request&amp;Response"></a>Common Request&amp;Response</h3><p>例子:<br>點擊網頁連結會發出一個common request 給server會回傳common response，而這個response 包含了header或者是網頁內容，基本上使用者要求什麼就回傳甚麼</p><h3 id="AJAX做的事情"><a href="#AJAX做的事情" class="headerlink" title="AJAX做的事情"></a>AJAX做的事情</h3><p>AJAX可做到的事情就是發送request 非同步的方式(Asynchronously)在後方，而不需要重新下載或是刷新全部頁面，而是只更新一小區域的內容，這樣的方式相對快速並且更充滿互動感</p><h3 id="AJAX去做request有幾種方式可以使用"><a href="#AJAX去做request有幾種方式可以使用" class="headerlink" title="AJAX去做request有幾種方式可以使用"></a>AJAX去做request有幾種方式可以使用</h3><p>1.使用原生JS語法<br>2.使用函式庫jQuery, Axios等等</p><h3 id="XmlHttpRequest"><a href="#XmlHttpRequest" class="headerlink" title="XmlHttpRequest"></a>XmlHttpRequest</h3><p>XmlHttpRequest Object (XHR)</p><blockquote><p>是一種物件型態的API 而他是一種物件代表會有屬性、方法可以使用，而這些其實是瀏覽器的JS環境提供的所以幾乎所有現代的瀏覽器都有這些API可以使用，其中的方法用來<strong>傳送資料往來</strong>用戶端-伺服器端或是瀏覽器-伺服器端</p></blockquote><ul><li>一種物件型態的API</li><li>瀏覽器的JS提供的環境</li><li>使用方法(methods)傳送資料往來用戶端-伺服器端</li><li>不只使用http，其他的protocols也可以使用</li><li>可以使用的資料格式有XML,JSON,plain text(純文字)</li></ul><h3 id="Server端回傳資料"><a href="#Server端回傳資料" class="headerlink" title="Server端回傳資料"></a>Server端回傳資料</h3><p>通常回傳的資料或是以JSON或是XML格式或是純文字</p><h3 id="HTML-Response"><a href="#HTML-Response" class="headerlink" title="HTML Response"></a>HTML Response</h3><p>這部分通常可以通過DOM去更新頁面或是回傳使用者要求的資料等等，回應使用者的需求</p><h3 id="Different-ways-libraries-amp-other-methods-to-make-AJAX-call"><a href="#Different-ways-libraries-amp-other-methods-to-make-AJAX-call" class="headerlink" title="Different ways(libraries&amp;other methods) to make AJAX call"></a>Different ways(libraries&amp;other methods) to make AJAX call</h3><ul><li>jQuery</li><li>Axios</li><li>Superagent</li><li>Fetch API 瀏覽器提供的功能</li><li>Prototype</li><li>Node HTTP</li></ul><h1 id="Let’s-Write-Some-Code"><a href="#Let’s-Write-Some-Code" class="headerlink" title="Let’s Write Some Code"></a>Let’s Write Some Code</h1><h2 id="Environment-setup"><a href="#Environment-setup" class="headerlink" title="Environment setup"></a>Environment setup</h2><p><a target="_blank" rel="noopener" href="https://www.apachefriends.org/zh_tw/download.html">下載 XAMPP</a></p><p><img src="https://i.imgur.com/afbClYT.png"></p><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=6tCWiexc05U&list=PLillGF-Rfqbap2IB6ZS4BBBcYPagAjpjn&index=2&ab_channel=TraversyMedia">XAMPP設定影片</a></p><h3 id="創造資料夾擺接下來的要操作的範例"><a href="#創造資料夾擺接下來的要操作的範例" class="headerlink" title="創造資料夾擺接下來的要操作的範例"></a>創造資料夾擺接下來的要操作的範例</h3><p><img src="https://i.imgur.com/SyFwXky.png"></p><p>創造資料夾ajaxcrash<br><img src="https://i.imgur.com/MlL1rhU.png"></p><p>使用VScode開啟這個資料夾並且創建html檔案ajax1.html</p><p>打開一個網頁連接到剛剛創建好的資料夾就可以開始跟課程瞜!<br><img src="https://i.imgur.com/e4Q1w72.png"></p><p>設置一個sample.txt待會<br>待會程式會抓取使用並放入一些隨意的內文</p><p><img src="https://i.imgur.com/ioDd0QK.png"></p><h2 id="AJAX-1-Text-File-純文字檔案AJAX提取"><a href="#AJAX-1-Text-File-純文字檔案AJAX提取" class="headerlink" title="AJAX 1 -Text File 純文字檔案AJAX提取"></a>AJAX 1 -Text File 純文字檔案AJAX提取</h2><h3 id="onload"><a href="#onload" class="headerlink" title="onload()"></a>onload()</h3><p>當印出xhr會得到一些可以使用的方法<br><img src="https://i.imgur.com/Yt8JHRd.png"></p><p>創建一個按鈕來抓取sample.txt的內容<br><img src="https://i.imgur.com/SEEgr3F.png"></p><p>當成功抓取內文後，查看Netword內容<br>使用的方法:GET<br>Status Code:200 OK<br>Content Type:text/plain<br><img src="https://i.imgur.com/YfTSz3F.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;button id=<span class="string">&quot;button&quot;</span>&gt;Get Text File&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="comment">//create event listener</span></span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;button&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, loadText);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">loadText</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//創造xhr物件 create XHR object</span></span><br><span class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            <span class="comment">//open方法填入的參數 open - type, url/file, async</span></span><br><span class="line">            xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&#x27;sample.txt&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//當status =200時印出sample.txt的內容</span></span><br><span class="line">            xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="built_in">this</span>.responseText);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//使用這個方法後才會顯示出內容在console裡面(send request)</span></span><br><span class="line">            xhr.send();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//HTTP Status</span></span><br><span class="line">        <span class="comment">//200 : &quot;OK&quot;</span></span><br><span class="line">        <span class="comment">//403 : &quot;Forbidden&quot;</span></span><br><span class="line">        <span class="comment">//404 : &quot;Not Found&quot;</span></span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>在onload狀態做<code>console.log(&#39;readystate:&#39;, xhr.readyState);</code>來看看目前位置的readystate在哪個位置</p><p>會發現只有<img src="https://i.imgur.com/uLMFaJP.png">中間的過程都不會跑</p><h4 id="當onload出錯的時候-產生404狀態的時候也可以呈現在DOM上面"><a href="#當onload出錯的時候-產生404狀態的時候也可以呈現在DOM上面" class="headerlink" title="當onload出錯的時候 產生404狀態的時候也可以呈現在DOM上面"></a>當onload出錯的時候 產生404狀態的時候也可以呈現在DOM上面</h4><p>這邊如果想要練習可以藉著把sample改名就可以取得這樣的狀態摟!</p><p><img src="https://i.imgur.com/LBmMEiF.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;readystate:&#x27;</span>, xhr.readyState);</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="comment">//正常狀態下顯示在DOM的處理</span></span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;text&#x27;</span>).innerHTML = <span class="built_in">this</span>.responseText</span><br><span class="line">                <span class="comment">// 也就是404的狀態也可以呈現在HTML上面</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="number">404</span>) &#123;</span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;text&#x27;</span>).innerHTML = <span class="string">&quot;Not Found&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><h3 id="onreadystatechange"><a href="#onreadystatechange" class="headerlink" title="onreadystatechange()"></a>onreadystatechange()</h3><p>會得出一樣的respose內容，差別在於<code>onreadystatechange()</code>在readystate必須在4的情況下也就是(4:request finished and response is ready)才會印出reponse的內容</p><p>可以使用<code>console.log(&#39;readystate:&#39;, xhr.readyState);</code>來看看目前位置的readystate在哪個位置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadText</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//create XHR object</span></span><br><span class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            <span class="comment">//open - type, url/file, async</span></span><br><span class="line">            xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&#x27;sample.txt&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 當放在這一段的時候只會得到readystate1</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;readystate:&#x27;</span>, xhr.readyState);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// xhr.onload = function () &#123;</span></span><br><span class="line">            <span class="comment">//     if (this.status == 200) &#123;</span></span><br><span class="line">            <span class="comment">//         // console.log(this.responseText);</span></span><br><span class="line">            <span class="comment">//     &#125;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;readystate:&#x27;</span>, xhr.readyState);</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.readyState == <span class="number">4</span> &amp;&amp; <span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="comment">// console.log(this.responseText);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//send request</span></span><br><span class="line">            xhr.send();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>放在條件式function之前時會顯示1</p><p>放在條件式中時會跑1234一直到也就是完成request以及respose ready內容進條件事就會跑後方的動作也就是印出responseText</p><p><img src="https://i.imgur.com/CI6r4hC.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;button id=<span class="string">&quot;button&quot;</span>&gt;Get Text File&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="comment">//create event listener</span></span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;button&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, loadText);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">loadText</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//create XHR object</span></span><br><span class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            <span class="comment">//open - type, url/file, async</span></span><br><span class="line">            xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&#x27;sample.txt&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">            xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 這邊的readyState必須是4下方的內容才會被印出</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.readyState == <span class="number">4</span> &amp;&amp; <span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="built_in">this</span>.responseText);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//send request</span></span><br><span class="line">            xhr.send();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// readyState Values</span></span><br><span class="line">        <span class="comment">// 0:request not initialized</span></span><br><span class="line">        <span class="comment">// 1:server connection established</span></span><br><span class="line">        <span class="comment">// 2:request received</span></span><br><span class="line">        <span class="comment">// 3:processing request</span></span><br><span class="line">        <span class="comment">// 4:request finished and response is ready</span></span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="兩者的區別"><a href="#兩者的區別" class="headerlink" title="兩者的區別"></a>兩者的區別</h4><p>在於兩者的readyState</p><ul><li>onload - 它不會執行除非狀態是readyState:4</li><li>onreadystatechange - 卻是readyState:2,3也會執行</li></ul><h3 id="onprogress"><a href="#onprogress" class="headerlink" title="onprogress()"></a>onprogress()</h3><p>等待網頁載入時會跑的gif動畫時背景在做的事情</p><p>使用<code>console.log(&#39;readystate:&#39;, xhr.readyState);</code>來看看目前位置的readystate在哪個位置得出 3:processing request</p><p><img src="https://i.imgur.com/EUDGFaX.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.onprogress = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;readyState:&#x27;</span>, xhr.readyState);</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><h3 id="onerror"><a href="#onerror" class="headerlink" title="onerror()"></a>onerror()</h3><p>當onload事件出錯時會跑這邊的函式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;Request Error...&#x27;</span>);</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><h3 id="把取得的response放到DOM上面"><a href="#把取得的response放到DOM上面" class="headerlink" title="把取得的response放到DOM上面"></a>把取得的response放到DOM上面</h3><p>在上方的HTML先設置一個區域可以抓取的div</p><p><img src="https://i.imgur.com/a6SCQQi.png"></p><p>抓好之後使用<code>innerHTML</code>修改內容變成<code>responseText</code>就可以把DOM呈現reponse的內容了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;readystate:&#x27;</span>, xhr.readyState);</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="comment">// console.log(this.responseText);</span></span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;text&#x27;</span>).innerHTML = <span class="built_in">this</span>.responseText</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><h2 id="AJAX2-Local-JSON-本地端資料夾AJAX提取資料"><a href="#AJAX2-Local-JSON-本地端資料夾AJAX提取資料" class="headerlink" title="AJAX2 - Local JSON 本地端資料夾AJAX提取資料"></a>AJAX2 - Local JSON 本地端資料夾AJAX提取資料</h2><p>前置作業:</p><p>設置ajax2.html來操作JSON<br><img src="https://i.imgur.com/0DC8Qzo.png"></p><p>多設置兩個資料夾待會做操作使用<br><img src="https://i.imgur.com/qrt5R5j.png"></p><p><img src="https://i.imgur.com/PQBR87Z.png"></p><p>並且轉換伺服器網址到ajax2<br><img src="https://i.imgur.com/qjvxRwM.png"></p><h3 id="取得JSON格式得內容"><a href="#取得JSON格式得內容" class="headerlink" title="取得JSON格式得內容"></a>取得JSON格式得內容</h3><p>使用下方的程式碼可以取得JSON全部的內容!</p><p>當點Get User時會產生下面的資料在console中<br><img src="https://i.imgur.com/ebGT9GQ.png"></p><p><img src="https://i.imgur.com/UlScz1z.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;button id=<span class="string">&quot;button1&quot;</span>&gt;Get User&lt;/button&gt;</span><br><span class="line">    &lt;button id=<span class="string">&quot;button2&quot;</span>&gt;Get Users&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h1&gt;User&lt;/h1&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;user&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;h1&gt;Users&lt;/h1&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;users&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;button1&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, loadUser);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">loadUser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;user.json&quot;</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">            xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="built_in">this</span>.responseText);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            xhr.send();</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse"></a><code>JSON.parse</code></h3><p>但是如果要取得其中的id,name,email個別取得的時候必須使用<code>JSON.parse</code></p><p>下方的範例我使用取的user的名字:Rick以字串的形式印出</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> user = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line">                    <span class="built_in">console</span>.log(user.name);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><h3 id="抓取到的JSON呈現到DOM上"><a href="#抓取到的JSON呈現到DOM上" class="headerlink" title="抓取到的JSON呈現到DOM上"></a>抓取到的JSON呈現到DOM上</h3><p>這邊我使用ES6的語法做串接直接貼到innerHTML上</p><p>當點擊Get User可以做到這樣的效果<br><img src="https://i.imgur.com/xEdYHx6.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadUser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;user.json&quot;</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">            xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> user = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">&quot;user&quot;</span>).innerHTML =</span><br><span class="line">                        <span class="string">`&lt;ul&gt;&lt;li&gt;ID:<span class="subst">$&#123;user.id&#125;</span>&lt;/li&gt;&lt;li&gt;name:<span class="subst">$&#123;user.name&#125;</span>&lt;/li&gt;&lt;li&gt;email:<span class="subst">$&#123;user.email&#125;</span>&lt;/li&gt;&lt;/ul&gt;`</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            xhr.send();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h3 id="如果要取的複數JSON資料呈現到DOM上"><a href="#如果要取的複數JSON資料呈現到DOM上" class="headerlink" title="如果要取的複數JSON資料呈現到DOM上"></a>如果要取的複數JSON資料呈現到DOM上</h3><p>這邊的for…in迴圈會印出物件的屬性並且使用+=把所有的內容接續印出直到把內容印完為止</p><p><img src="https://i.imgur.com/xRC8VVu.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadUsers</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;users.json&quot;</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">            xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">var</span> users = <span class="built_in">JSON</span>.parse(<span class="built_in">this</span>.responseText);</span><br><span class="line">                    <span class="keyword">var</span> output = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> users) &#123;</span><br><span class="line">                        output +=</span><br><span class="line">                            <span class="string">`&lt;ul&gt;&lt;li&gt;ID:<span class="subst">$&#123;users[i].id&#125;</span>&lt;/li&gt;&lt;li&gt;name:<span class="subst">$&#123;users[i].name&#125;</span>&lt;/li&gt;&lt;li&gt;email:<span class="subst">$&#123;users[i].email&#125;</span>&lt;/li&gt;&lt;/ul&gt;`</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">&quot;users&quot;</span>).innerHTML = output;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            xhr.send();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h2 id="AJAX3-External-API-AJAX提取-GitHub作範例"><a href="#AJAX3-External-API-AJAX提取-GitHub作範例" class="headerlink" title="AJAX3 - External API AJAX提取(GitHub作範例)"></a>AJAX3 - External API AJAX提取(GitHub作範例)</h2><p>處理方式基本上跟取的內部資料夾檔案的方式差不多只是在xhr.open的中間的參數改成Github API的網址，其他處理基本上都一樣</p><p><img src="https://i.imgur.com/l4pEydG.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;button id=<span class="string">&quot;button&quot;</span>&gt;Load GitHub Users&lt;/button&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;h1&gt;Github Users&lt;/h1&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;users&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;button&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, loadUsers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Load Github Users</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">loadUsers</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;https://api.github.com/users&quot;</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">            xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> users = <span class="built_in">JSON</span>.parse(<span class="built_in">this</span>.responseText);</span><br><span class="line">                    <span class="keyword">var</span> output = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> users) &#123;</span><br><span class="line">                        output +=</span><br><span class="line">                            <span class="string">`&lt;div class=&quot;user&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;img src=&quot;<span class="subst">$&#123;users[i].avatar_url&#125;</span>&quot; width =&quot;70&quot; height =&quot;70&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;ul&gt;</span></span><br><span class="line"><span class="string">                            &lt;li&gt;ID:<span class="subst">$&#123;users[i].id&#125;</span>&lt;/li&gt;</span></span><br><span class="line"><span class="string">                            &lt;li&gt;Login:<span class="subst">$&#123;users[i].login&#125;</span>&lt;/li&gt;</span></span><br><span class="line"><span class="string">                            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">                            &lt;/div&gt;`</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;users&#x27;</span>).innerHTML = output;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            xhr.send();</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="AJAX4-使用PHP取得資料並且對比AJAX取得方式-參考閱讀PHP的部分"><a href="#AJAX4-使用PHP取得資料並且對比AJAX取得方式-參考閱讀PHP的部分" class="headerlink" title="AJAX4 - 使用PHP取得資料並且對比AJAX取得方式(參考閱讀PHP的部分)"></a>AJAX4 - 使用PHP取得資料並且對比AJAX取得方式(參考閱讀PHP的部分)</h2><h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h3><p>使用正常PHP方式會整個reload網頁<br><img src="https://i.imgur.com/JsuWQEJ.gif"></p><p>使用AJAX會再背景處理資料<br><img src="https://i.imgur.com/7dtHe3H.gif"></p><p>一樣修改<code>xhr.open(process.php?name=$&#123;name&#125;)</code> 這個部分讓name的部分是input去輸入，其他AJAX部分的操作都差不多，PHP部分就不多做介紹只是舉例子示範</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;button id=<span class="string">&quot;button&quot;</span>&gt;Get Name&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h1&gt;PHP GET FORM&lt;/h1&gt;</span><br><span class="line">    &lt;form metod=<span class="string">&quot;GET&quot;</span> action=<span class="string">&quot;process.php&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;Submit&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h1&gt;PHP AJAX GET FORM&lt;/h1&gt;</span><br><span class="line">    &lt;form id=<span class="string">&quot;getForm&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span> id=<span class="string">&quot;name1&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;Submit&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;button&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, getName);</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;getForm&quot;</span>).addEventListener(<span class="string">&quot;submit&quot;</span>, getName);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            e.preventDefault();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> name = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;name1&#x27;</span>).value;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">`process.php?name=<span class="subst">$&#123;name&#125;</span>`</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">            xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="built_in">this</span>.responseText);</span><br><span class="line">            &#125;</span><br><span class="line">            xhr.send();</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h3><p>頁面呈現其實跟GET差不多但是方法內容不同，可以做參考就好</p><p>POST PHP的寫法不太好懂不過也只是要呈現出跟AJAX的差異所以這邊不多做解釋<br>不過POST的作用是把資料傳進伺服器</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;PHP POST FORM&lt;/h1&gt;</span><br><span class="line">    &lt;form method=<span class="string">&quot;POST&quot;</span> action=<span class="string">&quot;process.php&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;Submit&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h1&gt;PHP AJAX POST FORM&lt;/h1&gt;</span><br><span class="line">    &lt;form id=<span class="string">&quot;postForm&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span> id=<span class="string">&quot;name2&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;Submit&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;postForm&quot;</span>).addEventListener(<span class="string">&quot;submit&quot;</span>, postName);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">postName</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            e.preventDefault();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> name = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;name2&#x27;</span>).value;</span><br><span class="line">            <span class="keyword">var</span> params = <span class="string">&quot;name=&quot;</span> + name;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            xhr.open(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;process.php&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">            xhr.setRequestHeader(<span class="string">&#x27;Content-type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>);</span><br><span class="line"></span><br><span class="line">            xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="built_in">this</span>.responseText);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            xhr.send(params);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></div><section class="post-copyright"></section><section class="post-tags"><div><span>Tag(s):</span> <span class="tag"><a href="/tags/Javascript/"># Javascript</a></span></div><div><a href="javascript:window.history.back();">back</a> <span>· </span><a href="/">home</a></div></section><section class="post-nav"><a class="prev" rel="prev" href="/2020/12/12/jQuery-for-beginner/">jQuery-JS 幼幼班 - jQuery 篇</a> <a class="next" rel="next" href="/2020/12/08/JS-Async%20JS%20Crash%20Course/">JS-Async JS Crash Course</a></section></article></div></div><footer id="footer" class="footer"><div class="copyright"><span>© Chieh Liu | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span></div></footer></div></body></html>