<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="author" content="Chieh Liu"><title>Speak Number Guessing Game | Chieh Liu&#39;s Blog</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><script src="/js/script.js"></script><script src="/js/tocbot.min.js"></script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Chieh Liu's Blog" type="application/atom+xml">
</head><body><div class="wrapper"><header><nav class="navbar"><div class="container"><div class="navbar-header header-logo"><a href="/">Chieh Liu&#39;s Blog</a></div><div class="menu navbar-right"><a class="menu-item" href="/archives">Posts</a> <a class="menu-item" href="/category">Categories</a> <a class="menu-item" href="/tag">Tags</a> <a class="menu-item" href="/about">About</a> <input id="switch_default" type="checkbox" class="switch_default"> <label for="switch_default" class="toggleBtn"></label></div></div></nav><nav class="navbar-mobile" id="nav-mobile"><div class="container"><div class="navbar-header"><div><a href="/">Chieh Liu&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a></div><div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div></div><div class="menu" id="mobile-menu"><a class="menu-item" href="/archives">Posts</a> <a class="menu-item" href="/category">Categories</a> <a class="menu-item" href="/tag">Tags</a> <a class="menu-item" href="/about">About</a></div></div></nav></header><script>var mobileBtn=function(){var e=document.getElementsByClassName("menu-toggle")[0],t=document.getElementById("mobile-menu");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}</script><div class="main"><div class="container"><div class="post-toc"><div class="tocbot-list"></div><div class="tocbot-list-menu"><a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a> <a onclick="go_top()">Back to top</a> <a onclick="go_bottom()">Go to bottom</a></div></div><script>function expand_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:6,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","collapse_toc()"),o.innerHTML="Collapse all"}function collapse_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","expand_toc()"),o.innerHTML="Expand all"}function go_top(){window.scrollTo(0,0)}function go_bottom(){window.scrollTo(0,document.body.scrollHeight)}document.ready((function(){tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0})}))</script><article class="post-wrap"><header class="post-header"><h1 class="post-title">Speak Number Guessing Game</h1><div class="post-meta">Author: <a itemprop="author" rel="author" href="/">Chieh Liu</a> <span class="post-time">Date: <a href="#">February 27, 2021&nbsp;&nbsp;2:05:06</a> </span><span class="post-category">Category: <a href="/categories/Javascript%E4%BD%9C%E5%93%81/">Javascript作品</a></span></div></header><div class="post-content"><h1 id="Speak-Number-Guessing-Game-20-Web-Projects-With-Vanilla-Javascript"><a href="#Speak-Number-Guessing-Game-20-Web-Projects-With-Vanilla-Javascript" class="headerlink" title="Speak Number Guessing Game- 20 Web Projects With Vanilla Javascript"></a>Speak Number Guessing Game- 20 Web Projects With Vanilla Javascript</h1><hr><h2 id="tags-Javascript-relate"><a href="#tags-Javascript-relate" class="headerlink" title="tags: Javascript relate"></a>tags: Javascript relate</h2><h6 id="tags-Javascript"><a href="#tags-Javascript" class="headerlink" title="tags: Javascript"></a>tags: <code>Javascript</code></h6><h1 id="製作一個用聲音猜數字的遊戲"><a href="#製作一個用聲音猜數字的遊戲" class="headerlink" title="製作一個用聲音猜數字的遊戲"></a>製作一個用聲音猜數字的遊戲</h1><h2 id="成品"><a href="#成品" class="headerlink" title="成品:"></a>成品:</h2><p><img src="https://i.imgur.com/463ouXb.png"></p><p><a target="_blank" rel="noopener" href="https://chiehliu.github.io/git-projects/Speak%20Number%20Guessing%20Game/index.html">成品網址</a></p><h2 id="成品功能"><a href="#成品功能" class="headerlink" title="成品功能:"></a>成品功能:</h2><p>1.詢問是否可以使用麥克風<img src="https://i.imgur.com/v7tnOj7.png"> 2.判斷數字是否正確 3.顯示離目前數字的位置 - 喊得太高或是太低 4.如果喊得不是數字會顯示相對字樣 5.當遊戲成功會顯示按鈕讓遊戲重來</p><h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><h2 id="上-CSS-之前的-HTML"><a href="#上-CSS-之前的-HTML" class="headerlink" title="上 CSS 之前的 HTML:"></a>上 CSS 之前的 HTML:</h2><h2 id="html-程式碼"><a href="#html-程式碼" class="headerlink" title="html 程式碼:"></a>html 程式碼:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;img src&#x3D;&quot;img&#x2F;mic.png&quot; alt&#x3D;&quot;Speak&quot;&gt;</span><br><span class="line">    &lt;h1&gt;Guess a Number Between 1 - 100&lt;&#x2F;h1&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;Speak the number into your microphone&lt;&#x2F;h3&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 這個div會填入我們口說的內容透過JS呈現 --&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;msg&quot; class&#x3D;&quot;msg&quot;&gt;</span><br><span class="line">        &lt;div&gt;You said:&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;span class&#x3D;&quot;box&quot;&gt;20&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;div&gt;GO HIGHER&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;script.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS:"></a>CSS:</h1><h2 id="CSS-設置好的樣式"><a href="#CSS-設置好的樣式" class="headerlink" title="CSS 設置好的樣式"></a>CSS 設置好的樣式</h2><p><img src="https://i.imgur.com/463ouXb.png"></p><h2 id="CSS-完整程式碼"><a href="#CSS-完整程式碼" class="headerlink" title="CSS 完整程式碼"></a>CSS 完整程式碼</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"> * &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#2f3542</span> <span class="built_in">url</span>(<span class="string">&#x27;img/bg.jpg&#x27;</span>) no-repeat left center/cover;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: Arial, Helvetica, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span>,</span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 重新遊玩按鈕會透過JS呈現 */</span></span><br><span class="line"><span class="selector-class">.play-again</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f4f4f4</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.msg</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.5em</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 挑戰者猜的內容的框框修飾 */</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#dedede</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="JS"><a href="#JS" class="headerlink" title="JS:"></a>JS:</h1><h2 id="前置作業"><a href="#前置作業" class="headerlink" title="前置作業"></a>前置作業</h2><p>後方 webkit 部分是為了瀏覽器相容使用的</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.SpeechRecognition = <span class="built_in">window</span>.SpeechRecognition || <span class="built_in">window</span>.webkitSpeechRecognition</span><br></pre></td></tr></table></figure><h2 id="變數設置"><a href="#變數設置" class="headerlink" title="變數設置"></a>變數設置</h2><p>本篇唯一一個變數裡面會放入:</p><ul><li>猜的數字</li><li>顯示高於低於</li><li>顯示內容不符合</li></ul><p><code>const msgEl = document.getElementById(&quot;msg&quot;);</code></p><p><img src="https://i.imgur.com/3Hq6pDd.png"></p><h2 id="functions"><a href="#functions" class="headerlink" title="functions:"></a>functions:</h2><h3 id="randomNum"><a href="#randomNum" class="headerlink" title="randomNum()"></a><code>randomNum()</code></h3><p>產生題目(隨機數字 1-100 內)<br>抓取聲音產生的值<br>把抓取到聲音的值推到 DOM 上</p><h3 id="randomNum-產生題目-隨機數字-1-100-內"><a href="#randomNum-產生題目-隨機數字-1-100-內" class="headerlink" title="randomNum()產生題目(隨機數字 1-100 內)"></a><code>randomNum()</code>產生題目(隨機數字 1-100 內)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//這邊+1因為Math.random*100數字只到99不會到100所以必須做這個動作</span></span><br><span class="line"><span class="keyword">const</span> randomNum = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">100</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 檢查隨機數字有無正常生成</span></span><br><span class="line"><span class="comment">//把答案呈現在頁面上以便確認功能</span></span><br><span class="line"><span class="comment">// console.log(randomNum);</span></span><br></pre></td></tr></table></figure><h3 id="onSpeak-抓取聲音產生的值"><a href="#onSpeak-抓取聲音產生的值" class="headerlink" title="onSpeak()抓取聲音產生的值"></a><code>onSpeak()</code>抓取聲音產生的值</h3><p>抓取後:</p><ul><li>把抓取到聲音的值推到 DOM 上 <code>writeMessage(msg)</code></li><li>辨別使用者聲音答案是否符合題目 <code>checkNumber(msg)</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onSpeak</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> msg = e.results[<span class="number">0</span>][<span class="number">0</span>].transcript;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//檢查是否有音檔產生的值</span></span><br><span class="line">    <span class="comment">// console.log(msg);</span></span><br><span class="line"></span><br><span class="line">    writeMessage(msg);</span><br><span class="line">    checkNumber(msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="writeMessage-把抓取到聲音的值推到-DOM-上"><a href="#writeMessage-把抓取到聲音的值推到-DOM-上" class="headerlink" title="writeMessage()把抓取到聲音的值推到 DOM 上"></a><code>writeMessage()</code>把抓取到聲音的值推到 DOM 上</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//write what user speaks to DOM</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">writeMessage</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    msgEl.innerHTML = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;You said:&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;span class=&quot;box&quot;&gt;<span class="subst">$&#123;msg&#125;</span>&lt;/span&gt;`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="checkNumber-辨別使用者聲音答案是否符合題目"><a href="#checkNumber-辨別使用者聲音答案是否符合題目" class="headerlink" title="checkNumber()辨別使用者聲音答案是否符合題目:"></a><code>checkNumber()</code>辨別使用者聲音答案是否符合題目:</h3><ul><li>是否是數字</li><li>確認範圍有無超過</li><li>確認有沒有答對</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// check msg against number</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkNumber</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> num = +msg;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//確認是否是數字</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Number</span>.isNaN(num)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//這邊使用+=讓這邊的字串不會覆蓋掉wreiteMessage部分的文字</span></span><br><span class="line">        msgEl.innerHTML += <span class="string">`</span></span><br><span class="line"><span class="string">       &lt;div&gt;This is not a valid number&lt;/div&gt;`</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//確認範圍</span></span><br><span class="line">    <span class="keyword">if</span> (num &gt; <span class="number">100</span> || num &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        msgEl.innerHTML += <span class="string">`&lt;div&gt;Number must be between 1 - 100&lt;/div&gt;`</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//確認是否猜對</span></span><br><span class="line">    <span class="keyword">if</span> (num === randomNum) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//這邊因為已經答對要覆蓋住整個區域了所以不需要使用+=了</span></span><br><span class="line">        <span class="built_in">document</span>.body.innerHTML = <span class="string">`&lt;h2&gt;Congrats! You have guessed the number! &lt;br&gt;It was <span class="subst">$&#123;num&#125;</span>&lt;/h2&gt;&lt;button class=&quot;play-again&quot; id=&quot;play-again&quot;&gt;Play Again&lt;/button&gt;`</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num &gt; randomNum) &#123;</span><br><span class="line">        msgEl.innerHTML += <span class="string">&#x27;&lt;div&gt;GO LOWER&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        msgEl.innerHTML += <span class="string">&#x27;&lt;div&gt;GO HIGHER&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="事件監聽"><a href="#事件監聽" class="headerlink" title="事件監聽"></a>事件監聽</h2><p>使用聲音辨識 API 可以先把它設置為物件並且指派給<code>recognition</code>做變數使用比較好操作</p><p>SpeechRecognition 專屬的事件</p><ul><li>result- 當 SpeechRecognition 回傳一個值的時候觸發用來抓取使用者輸入的數字</li><li>end- 當 SpeechRecognition 服務停止時觸發，用來繼續遊戲</li><li>start- 開始接收音檔</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> recognition = <span class="keyword">new</span> SpeechRecognition();</span><br><span class="line"></span><br><span class="line"><span class="comment">//start recogniiton and game</span></span><br><span class="line">recognition.start();</span><br><span class="line"></span><br><span class="line"><span class="comment">//speak result取得音檔的值藉由onSpeak函式</span></span><br><span class="line">recognition.addEventListener(<span class="string">&#x27;result&#x27;</span>, onSpeak)</span><br><span class="line"></span><br><span class="line"><span class="comment">//當猜一次後(沒有答對)讓遊戲繼續</span></span><br><span class="line">recognition.addEventListener(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> recognition.start());</span><br><span class="line"></span><br><span class="line"><span class="comment">//搭遊戲答對會出現reload按鈕設置事件click並且判斷其id是否為play-again是的話畫面reload</span></span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 因為這邊的id是只有答對後才出現所以抓取事件在整個body上面所以必須選取其中的target.id才有辦法明確的抓到這個按鈕</span></span><br><span class="line">    <span class="keyword">if</span> (e.target.id == <span class="string">&#x27;play-again&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>小補充:</p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition">SpeechRecognition MDN</a></p><h2 id="JS-完整程式碼"><a href="#JS-完整程式碼" class="headerlink" title="JS 完整程式碼:"></a>JS 完整程式碼:</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> msgEl = <span class="built_in">document</span>.getElementById(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//抓取使用者聲音的值capture user speak</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onSpeak</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> msg = e.results[<span class="number">0</span>][<span class="number">0</span>].transcript;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//檢查是否有音檔產生的值</span></span><br><span class="line">    <span class="comment">// console.log(msg);</span></span><br><span class="line"></span><br><span class="line">    writeMessage(msg);</span><br><span class="line">    checkNumber(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//write what user speaks to DOM</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">writeMessage</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    msgEl.innerHTML = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;You said:&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;span class=&quot;box&quot;&gt;<span class="subst">$&#123;msg&#125;</span>&lt;/span&gt;`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// check msg against number</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkNumber</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> num = +msg;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//確認是否是數字</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Number</span>.isNaN(num)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//這邊使用+=讓這邊的字串不會覆蓋掉wreiteMessage部分的文字</span></span><br><span class="line">        msgEl.innerHTML += <span class="string">`</span></span><br><span class="line"><span class="string">       &lt;div&gt;This is not a valid number&lt;/div&gt;`</span>;</span><br><span class="line">        <span class="comment">//使用return是因為</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//確認範圍</span></span><br><span class="line">    <span class="keyword">if</span> (num &gt; <span class="number">100</span> || num &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        msgEl.innerHTML += <span class="string">`&lt;div&gt;Number must be between 1 - 100&lt;/div&gt;`</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//確認是否猜對</span></span><br><span class="line">    <span class="keyword">if</span> (num === randomNum) &#123;</span><br><span class="line">        <span class="built_in">document</span>.body.innerHTML = <span class="string">`&lt;h2&gt;Congrats! You have guessed the number! &lt;br&gt;It was <span class="subst">$&#123;num&#125;</span>&lt;/h2&gt;&lt;button class=&quot;play-again&quot; id=&quot;play-again&quot;&gt;Play Again&lt;/button&gt;`</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num &gt; randomNum) &#123;</span><br><span class="line">        msgEl.innerHTML += <span class="string">&#x27;&lt;div&gt;GO LOWER&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        msgEl.innerHTML += <span class="string">&#x27;&lt;div&gt;GO HIGHER&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//這邊+1因為Math.random*100數字只到99不會到100所以必須做這個動作</span></span><br><span class="line"><span class="keyword">const</span> randomNum = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">100</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//把答案呈現在頁面上以便確認功能</span></span><br><span class="line"><span class="built_in">console</span>.log(randomNum);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 檢查隨機數字有無正常生成</span></span><br><span class="line"><span class="comment">// console.log(randomNum);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入聲音辨識進來window</span></span><br><span class="line"><span class="built_in">window</span>.SpeechRecognition = <span class="built_in">window</span>.SpeechRecognition || <span class="built_in">window</span>.webkitSpeechRecognition</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> recognition = <span class="keyword">new</span> SpeechRecognition();</span><br><span class="line"></span><br><span class="line"><span class="comment">//start recogniiton and game</span></span><br><span class="line">recognition.start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//speak result</span></span><br><span class="line">recognition.addEventListener(<span class="string">&#x27;result&#x27;</span>, onSpeak)</span><br><span class="line"></span><br><span class="line"><span class="comment">//當猜一次後(沒有答對)讓遊戲繼續</span></span><br><span class="line">recognition.addEventListener(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> recognition.start());</span><br><span class="line"></span><br><span class="line"><span class="comment">//搭遊戲答對會出現reload按鈕設置事件click並且判斷其id是否為play-again是的話畫面reload</span></span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 因為這邊的id是只有答對後才出現所以抓取事件在整個body上面所以必須選取其中的target.id才有辦法明確的抓到這個按鈕</span></span><br><span class="line">    <span class="keyword">if</span> (e.target.id == <span class="string">&#x27;play-again&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><section class="post-copyright"></section><section class="post-tags"><div><span>Tag(s):</span> <span class="tag"><a href="/tags/HTML/"># HTML</a> <a href="/tags/CSS/"># CSS</a> <a href="/tags/JavaScript/"># JavaScript</a></span></div><div><a href="javascript:window.history.back();">back</a> <span>· </span><a href="/">home</a></div></section><section class="post-nav"><a class="prev" rel="prev" href="/2021/02/27/Sortable%20List/">Sortable List</a> <a class="next" rel="next" href="/2021/02/27/Typing%20Game/">Typing Game</a></section></article></div></div><footer id="footer" class="footer"><div class="copyright"><span>© Chieh Liu | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span></div></footer></div></body></html>