<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="author" content="Chieh Liu"><title>作品-JavaScript BookList App | Chieh Liu&#39;s Blog</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><script src="/js/script.js"></script><script src="/js/tocbot.min.js"></script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Chieh Liu's Blog" type="application/atom+xml">
</head><body><div class="wrapper"><header><nav class="navbar"><div class="container"><div class="navbar-header header-logo"><a href="/">Chieh Liu&#39;s Blog</a></div><div class="menu navbar-right"><a class="menu-item" href="/archives">Posts</a> <a class="menu-item" href="/category">Categories</a> <a class="menu-item" href="/tag">Tags</a> <a class="menu-item" href="/about">About</a> <input id="switch_default" type="checkbox" class="switch_default"> <label for="switch_default" class="toggleBtn"></label></div></div></nav><nav class="navbar-mobile" id="nav-mobile"><div class="container"><div class="navbar-header"><div><a href="/">Chieh Liu&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a></div><div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div></div><div class="menu" id="mobile-menu"><a class="menu-item" href="/archives">Posts</a> <a class="menu-item" href="/category">Categories</a> <a class="menu-item" href="/tag">Tags</a> <a class="menu-item" href="/about">About</a></div></div></nav></header><script>var mobileBtn=function(){var e=document.getElementsByClassName("menu-toggle")[0],t=document.getElementById("mobile-menu");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}</script><div class="main"><div class="container"><div class="post-toc"><div class="tocbot-list"></div><div class="tocbot-list-menu"><a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a> <a onclick="go_top()">Back to top</a> <a onclick="go_bottom()">Go to bottom</a></div></div><script>function expand_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:6,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","collapse_toc()"),o.innerHTML="Collapse all"}function collapse_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","expand_toc()"),o.innerHTML="Expand all"}function go_top(){window.scrollTo(0,0)}function go_bottom(){window.scrollTo(0,document.body.scrollHeight)}document.ready((function(){tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0})}))</script><article class="post-wrap"><header class="post-header"><h1 class="post-title">作品-JavaScript BookList App</h1><div class="post-meta">Author: <a itemprop="author" rel="author" href="/">Chieh Liu</a> <span class="post-time">Date: <a href="#">February 27, 2021&nbsp;&nbsp;1:53:56</a> </span><span class="post-category">Category: <a href="/categories/Javascript%E4%BD%9C%E5%93%81/">Javascript作品</a></span></div></header><div class="post-content"><h1 id="JavaScript-BookList-App-可以加入或刪去物件的清單"><a href="#JavaScript-BookList-App-可以加入或刪去物件的清單" class="headerlink" title="JavaScript BookList App (可以加入或刪去物件的清單)"></a>JavaScript BookList App (可以加入或刪去物件的清單)</h1><hr><h2 id="tags-Javascript-relate"><a href="#tags-Javascript-relate" class="headerlink" title="tags: Javascript relate"></a>tags: Javascript relate</h2><h6 id="tags-Javascript"><a href="#tags-Javascript" class="headerlink" title="tags: Javascript"></a>tags: <code>Javascript</code></h6><p><a target="_blank" rel="noopener" href="https://chiehliu.github.io/git-projects/MYBOOKLIST/index.html#">跟著做出來的範例</a></p><p>成本圖:</p><p><img src="https://i.imgur.com/jMC7v71.png"></p><h2 id="內容概要"><a href="#內容概要" class="headerlink" title="內容概要"></a>內容概要</h2><ul><li>三個 input 來做加入書本的動作，輸入內容後會在下方存入它們的資料，並且有刪除的功能，資料可以儲存在網頁上不會被重新整理刷掉</li><li>會跑出視窗當填寫不完整或是成功執行動作的時候</li><li>頁面使用簡單的 Bootrap 框架製作</li><li>有帶入一些 JSON,ES6-class 的元素</li></ul><h2 id="HTML-boostrap"><a href="#HTML-boostrap" class="headerlink" title="HTML+boostrap:"></a>HTML+boostrap:</h2><h3 id="前置作業"><a href="#前置作業" class="headerlink" title="前置作業"></a>前置作業</h3><p>使用<a target="_blank" rel="noopener" href="https://fontawesome.com/">fontawesome</a>來做 icon</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;kit.fontawesome.com&#x2F;2ae9e2b502.js&quot; crossorigin&#x3D;&quot;anonymous&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>使用<a target="_blank" rel="noopener" href="https://bootswatch.com/yeti/">bootswatch</a>來做框架這樣就不用處理 CSS 瞜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;linkrel&#x3D;&quot;stylesheet&quot;href&#x3D;&quot;https:&#x2F;&#x2F;bootswatch.com&#x2F;4&#x2F;ye&#96;&#96;ti&#x2F;bootstrap.min.css&quot;&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用範例:</p><ul><li>h1 裏面包含了 icon 的使用 fa 的部分還有<code>&lt;i&gt;</code>tag</li><li>text-primary 是 bootstrap</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 class&#x3D;&quot;display-4&quot;&gt;</span><br><span class="line">            &lt;i class&#x3D;&quot;fa fa-book-open text-center text-primary&quot;&gt;&lt;&#x2F;i&gt; My&lt;span class&#x3D;&quot;text-primary&quot;&gt;Book&lt;&#x2F;span&gt;List&lt;&#x2F;h1&gt;</span><br></pre></td></tr></table></figure><h2 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h2><p>使用 class 建構 Book 這個物件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">title, author, isbn</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.title = title;</span><br><span class="line">        <span class="built_in">this</span>.author = author;</span><br><span class="line">        <span class="built_in">this</span>.isbn = isbn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下來會分成數個部分來解釋這整份 JS 內容:</p><ul><li>UI class:處理有關 UI 的任務(使用者會看到並且操作的地方)</li><li>Store class:處理 storage 相關任務</li><li>Event:在 list 裡面展示書本</li><li>Event:加入書本</li><li>Event:移除書本</li></ul><hr><h3 id="UI-class"><a href="#UI-class" class="headerlink" title="UI class"></a>UI class</h3><p>有關於 UI 的內容會有五個相關的 method 來處理:</p><h4 id="displayBooks"><a href="#displayBooks" class="headerlink" title="displayBooks"></a>displayBooks</h4><p>新增的書本會放在這個區域下方</p><p><img src="https://i.imgur.com/SY6qf0A.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">displayBooKs</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//這邊註解的內容是作者用來一開始當作資料庫使用並且呈現在display區域</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// const StoredBooks = [&#123;</span></span><br><span class="line">        <span class="comment">//         title: &#x27;Book One&#x27;,</span></span><br><span class="line">        <span class="comment">//         author: &#x27;John Doe&#x27;,</span></span><br><span class="line">        <span class="comment">//         isbn: &#x27;3434434&#x27;,</span></span><br><span class="line">        <span class="comment">//     &#125;,</span></span><br><span class="line">        <span class="comment">//     &#123;</span></span><br><span class="line">        <span class="comment">//         title: &#x27;Book Two&#x27;,</span></span><br><span class="line">        <span class="comment">//         author: &#x27;Jane Doe&#x27;,</span></span><br><span class="line">        <span class="comment">//         isbn: &#x27;45545&#x27;,</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// ];</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//const books = StoredBooks;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> books = Store.getBooks();</span><br><span class="line">        <span class="comment">// 這個部分是Store部分建立好之後直接引用進來的函式呼叫</span></span><br><span class="line"></span><br><span class="line">        books.forEach(<span class="function">(<span class="params">book</span>) =&gt;</span> UI.addBookToList(book));</span><br><span class="line">    &#125;   <span class="comment">//books的部分會出來陣列(array)所以可以使用forEach逐個去使用addBookTodoList這個方法，來呈現被加進來的書本資料</span></span><br></pre></td></tr></table></figure><h4 id="addBookToList"><a href="#addBookToList" class="headerlink" title="addBookToList"></a>addBookToList</h4><p>書本加入 display 區域的”方法”呈現在這部分:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">addBookToList</span>(<span class="params">book</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 在#book-list區域下方新增元素&lt;tr&gt;</span></span><br><span class="line">        <span class="keyword">const</span> list = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#book-list&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> row = <span class="built_in">document</span>.createElement(<span class="string">&#x27;tr&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//新增的內容如下</span></span><br><span class="line">        row.innerHTML = <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;td&gt;<span class="subst">$&#123;book.title&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td&gt;<span class="subst">$&#123;book.author&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td&gt;<span class="subst">$&#123;book.isbn&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td&gt;&lt;a href=&quot;#&quot; class=&quot;btn btn-danger btn-sm delete&quot;&gt;X&lt;/a&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">        `</span></span><br><span class="line"></span><br><span class="line">        list.appendChild(row);</span><br><span class="line">        <span class="comment">// 讓row黏到list下方就是靠這行，appendChild功能是在在列表中添加項目</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="clearFields"><a href="#clearFields" class="headerlink" title="clearFields"></a>clearFields</h4><p>設定好這個清空功能後在兩個狀態下會清空欄位</p><ul><li>加入書本成功後會呼叫這個函式動作就會清空欄位詳見(Event: 加入書本)區域</li><li>重新整理頁面因為預設值為空(“”)</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">clearFields</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#title&#x27;</span>).value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#author&#x27;</span>).value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#isbn&#x27;</span>).value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="showAlert"><a href="#showAlert" class="headerlink" title="showAlert"></a>showAlert</h4><p>一些不熟的方法</p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-TW/docs/Web/API/Document/createElement">createElement - MDN</a></p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/createTextNode">createTextNode - MDN</a></p><p><a target="_blank" rel="noopener" href="https://www.w3schools.com/jsref/met_node_appendchild.asp">appendChild - w3cschool</a></p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setTimeout">setTimeout - MDN</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">showAlert</span>(<span class="params">message, className</span>)</span> &#123;</span><br><span class="line">        <span class="comment">//創造一個新的div來產生警告視窗</span></span><br><span class="line">        <span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">        <span class="comment">// 幫剛剛創造的div加上bootstrap的屬性產生alert視窗跟顏色message以及className的內容會在下方的Event 加入刪除書本處呼叫並且輸入</span></span><br><span class="line">        div.className = <span class="string">`alert alert-<span class="subst">$&#123;className&#125;</span>`</span>;</span><br><span class="line">        <span class="comment">//這邊是在撰寫加入meassage部分的程式碼使用appendChild方法加入createTextNode的文字內容</span></span><br><span class="line">        div.appendChild(<span class="built_in">document</span>.createTextNode(message));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//這個部分處理alert的位置，先設定好指派變數給container以及form，在使用insertBefore安插東西在...之前的概念</span></span><br><span class="line">        <span class="keyword">const</span> container = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.container&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> form = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#book-form&#x27;</span>);</span><br><span class="line">        container.insertBefore(div, form)<span class="comment">//參數(安插物,安插物後方的元素)</span></span><br><span class="line">        <span class="comment">//Vanish in 3 seconds</span></span><br><span class="line">        <span class="comment">//setTimeout計時器方法=&gt;選取要計時的class之後輸入在時間到之後要執行的方法(remove)最後輸入計時時間(毫秒)</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.alert&#x27;</span>).remove(), <span class="number">3000</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="deleteBook"><a href="#deleteBook" class="headerlink" title="deleteBook"></a>deleteBook</h4><p>這邊兩個 parentElement 的用意在於位置的關係要砍掉的是<code>&lt;td&gt;</code>外面的<code>&lt;tr&gt;</code><br><img src="https://i.imgur.com/0rYVXuv.png"></p><p><a target="_blank" rel="noopener" href="https://www.w3schools.com/jsref/met_node_contains.asp">contains - w3cschool</a></p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-TW/docs/Web/API/Element/classList">classList - MDN</a></p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/remove">remove - MDN</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">deleteBook</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 看看元素的class有無包含delete(顯然是有的見上方圖片是X按鈕)，有則執行remove</span></span><br><span class="line">        <span class="keyword">if</span> (el.classList.contains(<span class="string">&#x27;delete&#x27;</span>)) &#123;</span><br><span class="line">            el.parentElement.parentElement.remove();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Store-class"><a href="#Store-class" class="headerlink" title="Store class"></a>Store class</h3><p>處理 storage 的方法的 class，(local storage 也就是 browser 除非被刪除不然資料會存在那邊)<br>並且它不能存 object 只能存 string</p><h4 id="getBooks"><a href="#getBooks" class="headerlink" title="getBooks"></a>getBooks</h4><p>其實就是 return 傳入的書本的 value 陣列</p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/getItem">getItem - MDN</a></p><p>在四個需要抓取書本的地方出現:</p><ul><li>getBooks 方法本身</li><li>UI class displayBooks 要呈現書的地方就抓取了這邊的資料</li><li>addBook 方法內</li><li>removeBook 方法內</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">getBooks</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> books;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;books&#x27;</span>) === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//如果loacalStorage抓取books這個鍵的value為空的話值回復一個空的陣列</span></span><br><span class="line">            books = [];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//如果不為空則回覆取的&#x27;books&#x27;這個鍵的value</span></span><br><span class="line">            books = <span class="built_in">JSON</span>.parse(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;books&#x27;</span>))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> books;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="addBook"><a href="#addBook" class="headerlink" title="addBook"></a>addBook</h4><p>它是功能是在 localStorage 裡面創造鍵與值(key and value)藉由 push 的方式把參數(book)推進去’books’這個陣列裡面</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">addBook</span>(<span class="params">book</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> books = Store.getBooks();</span><br><span class="line">    books.push(book);</span><br><span class="line">    <span class="comment">// push 是在陣列後方加入一個或是多個元素在末端</span></span><br><span class="line">    <span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;books&#x27;</span>, <span class="built_in">JSON</span>.stringify(books));</span><br><span class="line">    <span class="comment">// setItem(屬性名稱,value(這邊value只能是string所以使用JSON.stringify))</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="removebook"><a href="#removebook" class="headerlink" title="removebook"></a>removebook</h4><p>得先取得已經加入得書的 value，之後根據剛剛的到的資料做做判斷如果符合 isbn 則執行 splice(刪除元素)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">removebook</span>(<span class="params">isbn</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//取的書本的value並且assign給books</span></span><br><span class="line">    <span class="keyword">const</span> books = Store.getBooks();</span><br><span class="line"></span><br><span class="line">    books.forEach(<span class="function">(<span class="params">book, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//當書本的value傳進來之後，它的陣列index也會傳進來</span></span><br><span class="line">        <span class="keyword">if</span> (book.isbn === isbn) &#123;</span><br><span class="line">    <span class="comment">//如果書本的isbn是對的話則splice(刪除)index(檢索位置),1個元素就可以完成效果摟!</span></span><br><span class="line">            books.splice(index, <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//這個部分是reset，因為剛剛刪除完之後再setItem一次重設它的鍵跟值</span></span><br><span class="line">    <span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;books&#x27;</span>, <span class="built_in">JSON</span>.stringify(books));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="事件監聽-addEventListener"><a href="#事件監聽-addEventListener" class="headerlink" title="事件監聽(addEventListener)"></a>事件監聽(addEventListener)</h3><h4 id="Event-展示書本在-list-裡面"><a href="#Event-展示書本在-list-裡面" class="headerlink" title="Event: 展示書本在 list 裡面"></a>Event: 展示書本在 list 裡面</h4><p>讓頁面在重整後依舊可以顯示出書本在 list 裡面</p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-TW/docs/Web/Events/DOMContentLoaded">DOMContentLoaded - MDN</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, UI.displayBooKs);</span><br></pre></td></tr></table></figure><h4 id="Event-加入書本"><a href="#Event-加入書本" class="headerlink" title="Event: 加入書本"></a>Event: 加入書本</h4><p>先抓取整個 input 區域後加入事件監聽在’submit’上，然後使用取得的事件的值(e)，去跑下方判斷式(前提是內容不為空(“”)</p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-TW/docs/Web/API/Event/preventDefault">preventDefault - MDN</a></p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit_event">submit_event - MDN</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Event: 加入書本</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//先抓取整個input區域後加入事件監聽在&#x27;submit&#x27;上，然後使用取得的事件的值(e)去跑下方的方法跟判斷式</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;#book-form&#x27;</span>).addEventListener(<span class="string">&#x27;submit&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//prevent actual submit</span></span><br><span class="line">    <span class="comment">//讓他提交後就停止動作</span></span><br><span class="line">    e.preventDefault();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Get form values</span></span><br><span class="line">    <span class="comment">//把取得的值assign給變數給下面做資料驗證</span></span><br><span class="line">    <span class="keyword">const</span> title = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#title&#x27;</span>).value;</span><br><span class="line">    <span class="keyword">const</span> author = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#author&#x27;</span>).value;</span><br><span class="line">    <span class="keyword">const</span> isbn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#isbn&#x27;</span>).value;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//Valadate (資料驗證)</span></span><br><span class="line">    <span class="keyword">if</span> (title === <span class="string">&#x27;&#x27;</span> || author === <span class="string">&#x27;&#x27;</span> || isbn === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        UI.showAlert(<span class="string">&#x27;Please fill in all fields&#x27;</span>, <span class="string">&#x27;danger&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//instantiate book因為book裡面的資料沒有static所以需要實體化(instantiate)</span></span><br><span class="line">        <span class="keyword">const</span> book = <span class="keyword">new</span> Book(title, author, isbn);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//經過資料驗證後開始呼叫各個靜態方法(static)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Add Book to UI</span></span><br><span class="line">        UI.addBookToList(book);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Add book to store</span></span><br><span class="line"></span><br><span class="line">        Store.addBook(book);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Show success message</span></span><br><span class="line"></span><br><span class="line">        UI.showAlert(<span class="string">&#x27;Book Added&#x27;</span>, <span class="string">&#x27;success&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Clear fields</span></span><br><span class="line">        UI.clearFields();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="Event-移除書本"><a href="#Event-移除書本" class="headerlink" title="Event: 移除書本"></a>Event: 移除書本</h4><p>一樣抓取完 input 區域後設定事件監聽使用取得的值(e)，去呼叫下方的靜態方法</p><p>UI 的部分刪除完成後再刪除 Store 的部分重新整理頁面就不會再跑回來瞜</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;#book-list&#x27;</span>).addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//remove books from UI</span></span><br><span class="line">    UI.deleteBook(e.target)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//remove book from store 這段的目的讓刪除的書本不會再重整頁面後再度出現所以要從store裡面刪除</span></span><br><span class="line">   <span class="comment">//e.target的目標是delete button，使用parentElement會到&lt;td&gt;但是目標是要找到isbn所以要找到sibling裡面的textContent</span></span><br><span class="line">    Store.removebook(e.target.parentElement.previousElementSibling.textContent);</span><br><span class="line"></span><br><span class="line">    UI.showAlert(<span class="string">&#x27;Book Removed&#x27;</span>, <span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><section class="post-copyright"></section><section class="post-tags"><div><span>Tag(s):</span> <span class="tag"><a href="/tags/HTML/"># HTML</a> <a href="/tags/CSS/"># CSS</a> <a href="/tags/JavaScript/"># JavaScript</a> <a href="/tags/Bootstrap/"># Bootstrap</a></span></div><div><a href="javascript:window.history.back();">back</a> <span>· </span><a href="/">home</a></div></section><section class="post-nav"><a class="prev" rel="prev" href="/2021/02/27/%5B%E4%BD%9C%E5%93%81%5DForm%20Validator/">作品-Form Validator</a> <a class="next" rel="next" href="/2021/02/27/Javascript%2030%2002%20-%20CSS%20+%20JS%20Clock/">作品-Javascript 30 02 - CSS + JS Clock</a></section></article></div></div><footer id="footer" class="footer"><div class="copyright"><span>© Chieh Liu | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span></div></footer></div></body></html>