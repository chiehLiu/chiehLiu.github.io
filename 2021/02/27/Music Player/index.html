<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="author" content="Chieh Liu"><title>實作練習-Music Player | Chieh Liu&#39;s Blog</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><script src="/js/script.js"></script><script src="/js/tocbot.min.js"></script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Chieh Liu's Blog" type="application/atom+xml">
</head><body><div class="wrapper"><header><nav class="navbar"><div class="container"><div class="navbar-header header-logo"><a href="/">Chieh Liu&#39;s Blog</a></div><div class="menu navbar-right"><a class="menu-item" href="/archives">Posts</a> <a class="menu-item" href="/category">Categories</a> <a class="menu-item" href="/tag">Tags</a> <a class="menu-item" href="/about">About</a> <input id="switch_default" type="checkbox" class="switch_default"> <label for="switch_default" class="toggleBtn"></label></div></div></nav><nav class="navbar-mobile" id="nav-mobile"><div class="container"><div class="navbar-header"><div><a href="/">Chieh Liu&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a></div><div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div></div><div class="menu" id="mobile-menu"><a class="menu-item" href="/archives">Posts</a> <a class="menu-item" href="/category">Categories</a> <a class="menu-item" href="/tag">Tags</a> <a class="menu-item" href="/about">About</a></div></div></nav></header><script>var mobileBtn=function(){var e=document.getElementsByClassName("menu-toggle")[0],t=document.getElementById("mobile-menu");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}</script><div class="main"><div class="container"><div class="post-toc"><div class="tocbot-list"></div><div class="tocbot-list-menu"><a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a> <a onclick="go_top()">Back to top</a> <a onclick="go_bottom()">Go to bottom</a></div></div><script>function expand_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:6,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","collapse_toc()"),o.innerHTML="Collapse all"}function collapse_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","expand_toc()"),o.innerHTML="Expand all"}function go_top(){window.scrollTo(0,0)}function go_bottom(){window.scrollTo(0,document.body.scrollHeight)}document.ready((function(){tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0})}))</script><article class="post-wrap"><header class="post-header"><h1 class="post-title">實作練習-Music Player</h1><div class="post-meta">Author: <a itemprop="author" rel="author" href="/">Chieh Liu</a> <span class="post-time">Date: <a href="#">February 27, 2021&nbsp;&nbsp;2:02:06</a> </span><span class="post-category">Category: <a href="/categories/Javascript%E4%BD%9C%E5%93%81/">Javascript作品</a></span></div></header><div class="post-content"><h1 id="Music-Player-20-Web-Projects-With-Vanilla-Javascript"><a href="#Music-Player-20-Web-Projects-With-Vanilla-Javascript" class="headerlink" title="Music Player- 20 Web Projects With Vanilla Javascript"></a>Music Player- 20 Web Projects With Vanilla Javascript</h1><hr><h2 id="tags-Javascript-relate"><a href="#tags-Javascript-relate" class="headerlink" title="tags: Javascript relate"></a>tags: Javascript relate</h2><h6 id="tags-Javascript"><a href="#tags-Javascript" class="headerlink" title="tags: Javascript"></a>tags: <code>Javascript</code></h6><h1 id="製作一個音樂撥放器-使用-html-CSS-以及-audio-API"><a href="#製作一個音樂撥放器-使用-html-CSS-以及-audio-API" class="headerlink" title="製作一個音樂撥放器 使用 html CSS 以及 audio API"></a>製作一個音樂撥放器 使用 html CSS 以及 audio API</h1><h2 id="成品"><a href="#成品" class="headerlink" title="成品:"></a>成品:</h2><p><img src="https://i.imgur.com/Ngco0dU.png"></p><p><a target="_blank" rel="noopener" href="https://chiehliu.github.io/git-projects/Music-Player/index.html">成品網址</a></p><h2 id="成品功能"><a href="#成品功能" class="headerlink" title="成品功能:"></a>成品功能:</h2><p>1.點擊中間的撥放後左邊的唱盤會開始旋轉 2.並且上方會跳出視窗顯示歌名 3.點擊上一首下一首會直接跳轉 4.在暫停狀態下點擊上一首或是下一首會直接撥放並且跳出視窗顯示歌名</p><hr><h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML:"></a>HTML:</h1><h2 id="上-CSS-之前的-HTML"><a href="#上-CSS-之前的-HTML" class="headerlink" title="上 CSS 之前的 HTML:"></a>上 CSS 之前的 HTML:</h2><p><img src="https://i.imgur.com/DJNwyLu.png"></p><h2 id="html-程式碼"><a href="#html-程式碼" class="headerlink" title="html 程式碼:"></a>html 程式碼:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Music Player&lt;&#x2F;h1&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 專輯名稱、進度條(progress bar)包裹住它們的是music-info --&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;music-container&quot; id&#x3D;&quot;music-container&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;music-info&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 專輯名稱 --&gt;</span><br><span class="line">        &lt;h4 id&#x3D;&quot;title&quot;&gt;&lt;&#x2F;h4&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 進度條 --&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;progress-container&quot; id&#x3D;&quot;progress-container&quot;&gt;</span><br><span class="line">          &lt;div class&#x3D;&quot;progress&quot; id&#x3D;&quot;progress&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 專輯音檔 --&gt;</span><br><span class="line">      &lt;!-- 這邊的來源先放著待會要修飾CSS之後會變成動態的操作JS(可以切換歌曲) --&gt;</span><br><span class="line">      &lt;audio src&#x3D;&quot;music&#x2F;ukulele.mp3&quot; id&#x3D;&quot;audio&quot;&gt;&lt;&#x2F;audio&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 專輯封面 --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;img-container&quot;&gt;</span><br><span class="line">        &lt;!-- 這邊的來源先放著待會要修飾CSS之後會變成動態的操作JS(切換歌曲時cover也會改) --&gt;</span><br><span class="line">        &lt;img src&#x3D;&quot;images&#x2F;ukulele.jpg&quot; alt&#x3D;&quot;music-cover&quot; id&#x3D;&quot;cover&quot; &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 按鍵區域 --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;navigation&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;button id&#x3D;&quot;prev&quot; class&#x3D;&quot;action-btn&quot;&gt;</span><br><span class="line">          &lt;i class&#x3D;&quot;fas fa-backward&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">        &lt;&#x2F;button&gt;</span><br><span class="line">        &lt;button id&#x3D;&quot;play&quot; class&#x3D;&quot;action-btn action-btn-big&quot;&gt;</span><br><span class="line">          &lt;i class&#x3D;&quot;fas fa-play&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">        &lt;&#x2F;button&gt;</span><br><span class="line">        &lt;button id&#x3D;&quot;next&quot; class&#x3D;&quot;action-btn&quot;&gt;</span><br><span class="line">          &lt;i class&#x3D;&quot;fas fa-forward&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">        &lt;&#x2F;button&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src&#x3D;&quot;script.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure><p>小補充:</p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio">audio-MDN</a></p><hr><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS:"></a>CSS:</h1><h2 id="相關-CSS-設定"><a href="#相關-CSS-設定" class="headerlink" title="相關 CSS 設定:"></a>相關 CSS 設定:</h2><ul><li>背景使用漸層色處理</li><li>讓封面(cover)旋轉使用 animation</li><li>使用偽元素做出封面圓點</li><li>包含專輯名稱、進度條的跳出視窗做 transition 處理</li><li>進度條的 CSS 設置</li></ul><h3 id="背景使用漸層色處理"><a href="#背景使用漸層色處理" class="headerlink" title="背景使用漸層色處理"></a>背景使用漸層色處理</h3><p>linear-gradient(產生位置角度,顏色 1 顏色 2) 後面%數代表梯度(顏色漸變的層度)</p><p><a target="_blank" rel="noopener" href="https://www.w3schools.com/css/css3_gradients.asp">linear-gradient -w3cschool</a></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">  <span class="number">0deg</span>,</span><br><span class="line">  <span class="built_in">rgba</span>(<span class="number">247</span>, <span class="number">247</span>, <span class="number">247</span>, <span class="number">1</span>) <span class="number">23.8%</span>,</span><br><span class="line">  <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">221</span>, <span class="number">221</span>, <span class="number">1</span>) <span class="number">92%</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="CSS-animation"><a href="#CSS-animation" class="headerlink" title="CSS animation"></a>CSS animation</h3><p><img src="https://i.imgur.com/3IFpISV.png"></p><p>CSS animaiton 縮寫順序:<br>animation: name | duration | timing-function | delay | iteration-count | direction | fill-mode | play-state;</p><h3 id="keyframes"><a href="#keyframes" class="headerlink" title="keyframes"></a>keyframes</h3><p>animation 的動作是來自於 CSS style 逐步的改變有兩種做法</p><ul><li>0~100%的時間甚麼樣的 style 做甚麼事情</li><li>from to 擺入不同的 css style 去做動畫(本專案使用這個)</li><li><img src="https://i.imgur.com/cdDkfcv.png"></li></ul><p><img src="https://i.imgur.com/4cclgm8.png"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img-container</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">110px</span>;</span><br><span class="line">  <span class="attribute">width</span>: inherit;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 動畫設置縮寫: 動畫名稱:rotate 延續3s轉一整圈  線性的加速度 無限重複*/</span></span><br><span class="line">  <span class="attribute">animation</span>: rotate <span class="number">3s</span> linear infinite;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 控制動畫的播放狀態其實也可以放進縮寫裡面 : 先設定暫停待會用JS開啟*/</span></span><br><span class="line">  <span class="attribute">animation-play-state</span>: paused;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 必須使用JS才會切換到這個play狀態 預設設定上面cover是不會跑的 */</span></span><br><span class="line"><span class="selector-class">.music-container</span><span class="selector-class">.play</span> <span class="selector-class">.img-container</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">animation-play-state</span>: running;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* animation裡面的動畫設定可以寫在這邊from到to是一整段動畫過程中使用的元素 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="偽元素製作圓心"><a href="#偽元素製作圓心" class="headerlink" title="偽元素製作圓心"></a>偽元素製作圓心</h3><p>唱盤指針 使用 CSS 偽元素做出子元素圓點當作指針並且做定位</p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/::after">偽元素 -MDN</a></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img-container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">110px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 唱盤指針 使用CSS 偽元素做出子元素圓點當作指針*/</span></span><br><span class="line"><span class="selector-class">.img-container</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, <span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CSS-transition"><a href="#CSS-transition" class="headerlink" title="CSS transition"></a>CSS transition</h3><p>CSS Transition 縮寫順序: property | duration | timing-function | delay</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 包含專輯名稱、進度條的跳出視窗 */</span></span><br><span class="line"><span class="selector-class">.music-info</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span> <span class="number">15px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="comment">/* 這邊calc是指100%的width減去40px寬度就是取得的width */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">40px</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">150px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*JS控制出場前顯示透明 */</span></span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0%</span>);</span><br><span class="line">  <span class="comment">/* 使用transform特效時觸發transition 的修飾秒數以及加速度特效*/</span></span><br><span class="line">  <span class="comment">/* 這邊後半部的opacity是另外的不算在transition的縮寫裡面喔! */</span></span><br><span class="line">  <span class="comment">/* transition 後方的0.3s 以及ease-in修飾transform特效 */</span></span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease-in, opacity <span class="number">0.3s</span> ease-in;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* JS控制出廠前先壓在最底層 */</span></span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* JS控制出場後顯示1 */</span></span><br><span class="line"><span class="selector-class">.music-container</span><span class="selector-class">.play</span> <span class="selector-class">.music-info</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="專輯進度條-CSS-處理"><a href="#專輯進度條-CSS-處理" class="headerlink" title="專輯進度條 CSS 處理"></a>專輯進度條 CSS 處理</h3><p>使用 transition: width 0.1s linear</p><p>改變 width 讓寬度改變就會像一般撥放軟體再跑進度條一樣顯示了</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.progress</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fe8daa</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="comment">/* 這邊的width要用JS控制因為它是音樂進行的進度條 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: width <span class="number">0.1s</span> linear;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="CSS-設置好的樣式"><a href="#CSS-設置好的樣式" class="headerlink" title="CSS 設置好的樣式"></a>CSS 設置好的樣式</h2><p><img src="https://i.imgur.com/P6WNHbo.png"></p><h2 id="CSS-完整程式碼"><a href="#CSS-完整程式碼" class="headerlink" title="CSS 完整程式碼"></a>CSS 完整程式碼</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">@import</span> url(<span class="string">&quot;https://fonts.googleapis.com/css?family=Lato&amp;display=swap&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 全域設定 */</span></span><br><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="comment">/* linear-gradient(位置,顏色1顏色2) 後面%數代表梯度(顏色漸變的層度) */</span></span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    <span class="number">0deg</span>,</span><br><span class="line">    <span class="built_in">rgba</span>(<span class="number">247</span>, <span class="number">247</span>, <span class="number">247</span>, <span class="number">1</span>) <span class="number">23.8%</span>,</span><br><span class="line">    <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">221</span>, <span class="number">221</span>, <span class="number">1</span>) <span class="number">92%</span></span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Lato&quot;</span>, sans-serif;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.music-container</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">20px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">169</span>, <span class="number">169</span>, <span class="number">0.6</span>);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/* z-index較大數值的元素會覆蓋其他的較小的數值的z-index */</span></span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.img-container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">110px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 唱盤指針 使用CSS 偽元素做出子元素圓點當作指針*/</span></span><br><span class="line"><span class="selector-class">.img-container</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, <span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.img-container</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">110px</span>;</span><br><span class="line">  <span class="comment">/* 使用inherit會繼承到他parent的width也就是img-container width:110 */</span></span><br><span class="line">  <span class="attribute">width</span>: inherit;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 動畫設置縮寫: 動畫名稱:rotate 延續3s轉一整圈  線性的加速度 無限重複*/</span></span><br><span class="line">  <span class="attribute">animation</span>: rotate <span class="number">3s</span> linear infinite;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 控制動畫的播放狀態其實也可以放進縮寫裡面 : 先設定暫停待會用JS開啟*/</span></span><br><span class="line">  <span class="attribute">animation-play-state</span>: paused;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 必須使用JS才會切換到這個play狀態 預設設定上面cover是不會跑的 */</span></span><br><span class="line"><span class="selector-class">.music-container</span><span class="selector-class">.play</span> <span class="selector-class">.img-container</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">animation-play-state</span>: running;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* animation裡面的動畫設定可以寫在這邊from到to是一整段動畫過程中使用的元素 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navigation</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.action-btn</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#dfdbdf</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.action-btn</span><span class="selector-class">.action-btn-big</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#cdc2d0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 當點擊取得焦點後移除邊框 */</span></span><br><span class="line"><span class="selector-class">.action-btn</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.music-info</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span> <span class="number">15px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="comment">/* 這邊calc是指100%的width減去40px寬度就是取得的width */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">40px</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0%</span>);</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease-in, opacity <span class="number">0.3s</span> ease-in;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.music-container</span><span class="selector-class">.play</span> <span class="selector-class">.music-info</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.music-info</span> <span class="selector-tag">h4</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.progress-container</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.progress</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fe8daa</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="comment">/* 這邊的width要用JS控制因為它是音樂進行的進度條 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: width <span class="number">0.1s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>小補充:</p><p><code>inherit</code>會繼承到他 parent 的 width 也就是 img-container width:110<br>width: inherit;</p><p><code>calc</code>是指 100%的 width 減去 40px 寬度就是取得的 width<br>width: calc(100% - 40px);</p><hr><h1 id="JS"><a href="#JS" class="headerlink" title="JS:"></a>JS:</h1><h2 id="變數設置"><a href="#變數設置" class="headerlink" title="變數設置"></a>變數設置</h2><ul><li><p>musicContainer 區域<br><img src="https://i.imgur.com/DtbV5Ad.png"></p></li><li><p>playBtn,prevBtn,nextBtn 區域<br><img src="https://i.imgur.com/rQ8HNKo.png"></p></li><li><p>audio 區域<br>這部分是音檔嵌入在 html 裡面</p></li><li><p>progressContainer 區域<br><img src="https://i.imgur.com/PLWVawP.png"></p></li><li><p>progress 區域<br>裡面的進度條<br><img src="https://i.imgur.com/7F6O9D8.png"></p></li><li><p>title<br>目前藏在 music-container 下方<br><img src="https://i.imgur.com/fBUeRLy.png"></p></li><li><p>cover<br>專輯封面<br><img src="https://i.imgur.com/JM4vTK5.png"></p></li><li><p>songs<br><code>[&#39;hey&#39;, &#39;summer&#39;, &#39;ukulele&#39;]</code><br>這邊設置歌曲名稱給下面做抓取</p></li><li><p>songIndex<br>一開始的畫面初始值的 index</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> musicContainer = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;music-container&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> playBtn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;play&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> prevBtn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;prev&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> nextBtn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;next&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> audio = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;audio&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> progress = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;progress&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> progressContainer = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;progress-container&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> title = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> cover = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;cover&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> songs = [<span class="string">&#x27;hey&#x27;</span>, <span class="string">&#x27;summer&#x27;</span>, <span class="string">&#x27;ukulele&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> songIndex = <span class="number">2</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="functions"><a href="#functions" class="headerlink" title="functions:"></a>functions:</h2><ul><li>更新專輯名稱<br>loadSong</li></ul><p>雖然做了更新但是這邊專輯資訊還沒有跳出來</p><ul><li>撥放暫停相關:<br>playSong<br>pauseSong</li></ul><p>在撥放後才會跳出專輯視窗</p><ul><li>上一首下一首相關:<br>prevSong<br>nextSong</li></ul><p>這邊也會跳出視窗因為也會撥放歌曲</p><ul><li>進度條相關<br>updatePorgress<br>setProgress</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//設置好歌名給下面的src作抓取(song title)</span></span><br><span class="line"><span class="keyword">const</span> songs = [<span class="string">&#x27;hey&#x27;</span>, <span class="string">&#x27;summer&#x27;</span>, <span class="string">&#x27;ukulele&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//設置檢索抓取選到的歌曲對應其images以及音檔</span></span><br><span class="line"><span class="comment">// keep track of song</span></span><br><span class="line"><span class="keyword">let</span> songIndex = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//呼叫loadSong重置歌曲的名稱、images以及音檔</span></span><br><span class="line"><span class="comment">//Initiallly load song details into DOM</span></span><br><span class="line">loadSong(songs[songIndex]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//重置歌曲的名稱、images以及音檔(update song details)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadSong</span>(<span class="params">song</span>) </span>&#123;</span><br><span class="line">    title.innerText = song;</span><br><span class="line">    audio.src = <span class="string">`music/<span class="subst">$&#123;song&#125;</span>.mp3`</span>;</span><br><span class="line">    cover.src = <span class="string">`images/<span class="subst">$&#123;song&#125;</span>.jpg`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//play song</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">playSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 增加play詞墜到musicContainer裡面就可以觸發css animation的動畫</span></span><br><span class="line">    <span class="comment">//讓cover旋轉以及專輯名稱進度條跳上來</span></span><br><span class="line">    musicContainer.classList.add(<span class="string">&#x27;play&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//並且按下play後圖案會改成pause</span></span><br><span class="line">    playBtn.querySelector(<span class="string">&#x27;i.fas&#x27;</span>).classList.remove(<span class="string">&#x27;fa-play&#x27;</span>);</span><br><span class="line">    playBtn.querySelector(<span class="string">&#x27;i.fas&#x27;</span>).classList.add(<span class="string">&#x27;fa-pause&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 這是audio的方法play可以直接撥放音檔</span></span><br><span class="line">    audio.play();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//pause song</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pauseSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//去除play詞墜從musicContainer裡面就可以消除css animation的動畫</span></span><br><span class="line">    <span class="comment">//讓cover旋轉以及專輯名稱進度條 關閉</span></span><br><span class="line">    musicContainer.classList.remove(<span class="string">&#x27;play&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//並且按下pause後圖案會改成play</span></span><br><span class="line">    playBtn.querySelector(<span class="string">&#x27;i.fas&#x27;</span>).classList.add(<span class="string">&#x27;fa-play&#x27;</span>);</span><br><span class="line">    playBtn.querySelector(<span class="string">&#x27;i.fas&#x27;</span>).classList.remove(<span class="string">&#x27;fa-pause&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 這是audio的方法pause可以直接停止音檔</span></span><br><span class="line">    audio.pause();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//上一首點擊之後要撥放上一首歌曲(Previous song)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">prevSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//每次按上一首songIndex要減一才會跑到上一首</span></span><br><span class="line">    songIndex--;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//這邊要判斷當songIndex減到0以下的時候</span></span><br><span class="line">    <span class="comment">// 要回到index2使用length-1也就是3-1=2</span></span><br><span class="line">    <span class="keyword">if</span> (songIndex &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        songIndex = songs.length - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 當歌曲轉換自然要更改重置歌曲的名字音檔以及歌名</span></span><br><span class="line">    loadSong(songs[songIndex]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以及要直接撥放</span></span><br><span class="line">    playSong();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//下一首點擊之後要撥放下一首歌曲(Next song)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nextSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//每次按下一首songIndex要加一才會跑到下一首</span></span><br><span class="line">    songIndex++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//這邊要判斷當songIndex加到超過歌曲長度-1時(也就是全部index都跑完了)</span></span><br><span class="line">    <span class="comment">// 要回到index=0也就是回到第一首</span></span><br><span class="line">    <span class="keyword">if</span> (songIndex &gt; songs.length - <span class="number">1</span>) &#123;</span><br><span class="line">        songIndex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 當歌曲轉換自然要更改重置歌曲的名字音檔以及歌名</span></span><br><span class="line">    loadSong(songs[songIndex]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以及要直接撥放</span></span><br><span class="line">    playSong();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使progress bar隨歌曲進度更新(update progress bar)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateProgress</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解構srcElement出其中的duration以及currentTime</span></span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">        duration,</span><br><span class="line">        currentTime</span><br><span class="line">    &#125; = e.srcElement; <span class="comment">//duration是整首歌的時間currentTime是過了多久</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//相處之後可以得出現在的進度幾趴就可以轉換成width顯示在progress bar了</span></span><br><span class="line">    <span class="keyword">const</span> progressPercent = (currentTime / duration) * <span class="number">100</span>;</span><br><span class="line">    progress.style.width = <span class="string">`<span class="subst">$&#123;progressPercent&#125;</span>%`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//滑鼠點擊進度條移動(set progress bar)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setProgress</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//this指向progress-container 所以它的width就是216</span></span><br><span class="line">    <span class="keyword">const</span> width = <span class="built_in">this</span>.clientWidth;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 這個變數被指派了 滑鼠點擊progress-container身上的位置</span></span><br><span class="line">    <span class="keyword">const</span> clickX = e.offsetX;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> duration = audio.duration; <span class="comment">//音檔總時間</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//currentTime是指當下音檔的時間</span></span><br><span class="line">    <span class="comment">//progress bar的進度(是趴數)乘上音檔總時間 就是現在的進度!</span></span><br><span class="line">    audio.currentTime = (clickX / width) * duration;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="事件監聽"><a href="#事件監聽" class="headerlink" title="事件監聽"></a>事件監聽</h2><ul><li>撥放按鍵</li><li>上一首下一首</li><li>讓進度條跟著音檔進度走(監聽時間更新進度事件)</li><li>滑鼠點擊哪邊進度條走哪邊(監聽點擊事件)</li><li>歌曲結束(監聽結束事件)</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//event listeners</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 這邊的click用來確定現在的音檔狀態是撥放還是暫停</span></span><br><span class="line"><span class="comment">// 如果是撥放則暫停如果是暫停則撥放</span></span><br><span class="line">playBtn.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> isPlaying = musicContainer.classList.contains(<span class="string">&#x27;play&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isPlaying) &#123;</span><br><span class="line">        pauseSong();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        playSong();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//上一首下一首切換change song</span></span><br><span class="line">prevBtn.addEventListener(<span class="string">&#x27;click&#x27;</span>, prevSong);</span><br><span class="line">nextBtn.addEventListener(<span class="string">&#x27;click&#x27;</span>, nextSong);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//time/song update(讓進度條隨著音檔跑)</span></span><br><span class="line">audio.addEventListener(<span class="string">&#x27;timeupdate&#x27;</span>, updateProgress);</span><br><span class="line"></span><br><span class="line"><span class="comment">//處理porgressbar進度條滑鼠點哪邊去哪邊(click on progress bar)</span></span><br><span class="line">progressContainer.addEventListener(<span class="string">&#x27;click&#x27;</span>, setProgress)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用ended事件處理audio讓它結束時觸發，並且執行nextSong 函式(song end)</span></span><br><span class="line">audio.addEventListener(<span class="string">&#x27;ended&#x27;</span>, nextSong);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>小補充:</p><p><a target="_blank" rel="noopener" href="https://www.w3schools.com/Jsref/prop_audio_currenttime.asp">Audio currentTime Property MDN</a></p><p><a target="_blank" rel="noopener" href="https://www.w3schools.com/Jsref/prop_audio_duration.asp">Audio duration Property MDN</a></p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/ended_event">Ended Event MDN</a></p><p>clientWidth 的範圍:<br><img src="https://i.imgur.com/tSCQ0M5.png"></p><h2 id="JS-完整程式碼"><a href="#JS-完整程式碼" class="headerlink" title="JS 完整程式碼:"></a>JS 完整程式碼:</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> musicContainer = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;music-container&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> playBtn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;play&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> prevBtn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;prev&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> nextBtn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;next&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> audio = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;audio&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> progress = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;progress&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> progressContainer = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;progress-container&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> title = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> cover = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;cover&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//設置好歌名給下面的src作抓取(song title)</span></span><br><span class="line"><span class="keyword">const</span> songs = [<span class="string">&#x27;hey&#x27;</span>, <span class="string">&#x27;summer&#x27;</span>, <span class="string">&#x27;ukulele&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//設置檢索抓取選到的歌曲對應其images以及音檔</span></span><br><span class="line"><span class="comment">// keep track of song</span></span><br><span class="line"><span class="keyword">let</span> songIndex = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//呼叫loadSong重置歌曲的名稱、images以及音檔</span></span><br><span class="line"><span class="comment">//Initiallly load song details into DOM</span></span><br><span class="line">loadSong(songs[songIndex]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//重置歌曲的名稱、images以及音檔(update song details)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadSong</span>(<span class="params">song</span>) </span>&#123;</span><br><span class="line">    title.innerText = song;</span><br><span class="line">    audio.src = <span class="string">`music/<span class="subst">$&#123;song&#125;</span>.mp3`</span>;</span><br><span class="line">    cover.src = <span class="string">`images/<span class="subst">$&#123;song&#125;</span>.jpg`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.dir(audio);</span><br><span class="line"></span><br><span class="line"><span class="comment">//play song</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">playSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 增加play詞墜到musicContainer裡面就可以觸發css animation的動畫</span></span><br><span class="line">    <span class="comment">//讓cover旋轉以及專輯名稱進度條跳上來</span></span><br><span class="line">    musicContainer.classList.add(<span class="string">&#x27;play&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//並且按下play後圖案會改成pause</span></span><br><span class="line">    playBtn.querySelector(<span class="string">&#x27;i.fas&#x27;</span>).classList.remove(<span class="string">&#x27;fa-play&#x27;</span>);</span><br><span class="line">    playBtn.querySelector(<span class="string">&#x27;i.fas&#x27;</span>).classList.add(<span class="string">&#x27;fa-pause&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 這是audio的方法play可以直接撥放音檔</span></span><br><span class="line">    audio.play();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//pause song</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pauseSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//去除play詞墜從musicContainer裡面就可以消除css animation的動畫</span></span><br><span class="line">    <span class="comment">//讓cover旋轉以及專輯名稱進度條 關閉</span></span><br><span class="line">    musicContainer.classList.remove(<span class="string">&#x27;play&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//並且按下pause後圖案會改成play</span></span><br><span class="line">    playBtn.querySelector(<span class="string">&#x27;i.fas&#x27;</span>).classList.add(<span class="string">&#x27;fa-play&#x27;</span>);</span><br><span class="line">    playBtn.querySelector(<span class="string">&#x27;i.fas&#x27;</span>).classList.remove(<span class="string">&#x27;fa-pause&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 這是audio的方法pause可以直接停止音檔</span></span><br><span class="line">    audio.pause();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//上一首點擊之後要撥放上一首歌曲(Previous song)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">prevSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//每次按上一首songIndex要減一才會跑到上一首</span></span><br><span class="line">    songIndex--;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//這邊要判斷當songIndex減到0以下的時候</span></span><br><span class="line">    <span class="comment">// 要回到index2使用length-1也就是3-1=2</span></span><br><span class="line">    <span class="keyword">if</span> (songIndex &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        songIndex = songs.length - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 當歌曲轉換自然要更改重置歌曲的名字音檔以及歌名</span></span><br><span class="line">    loadSong(songs[songIndex]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以及要直接撥放</span></span><br><span class="line">    playSong();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//下一首點擊之後要撥放下一首歌曲(Next song)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nextSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//每次按下一首songIndex要加一才會跑到下一首</span></span><br><span class="line">    songIndex++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//這邊要判斷當songIndex加到超過歌曲長度-1時(也就是全部index都跑完了)</span></span><br><span class="line">    <span class="comment">// 要回到index=0也就是回到第一首</span></span><br><span class="line">    <span class="keyword">if</span> (songIndex &gt; songs.length - <span class="number">1</span>) &#123;</span><br><span class="line">        songIndex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 當歌曲轉換自然要更改重置歌曲的名字音檔以及歌名</span></span><br><span class="line">    loadSong(songs[songIndex]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以及要直接撥放</span></span><br><span class="line">    playSong();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使progress bar隨歌曲進度更新(update progress bar)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateProgress</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解構srcElement出其中的duration以及currentTime</span></span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">        duration,</span><br><span class="line">        currentTime</span><br><span class="line">    &#125; = e.srcElement; <span class="comment">//duration是整首歌的時間currentTime是過了多久</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//相處之後可以得出現在的進度幾趴就可以轉換成width顯示在progress bar了</span></span><br><span class="line">    <span class="keyword">const</span> progressPercent = (currentTime / duration) * <span class="number">100</span>;</span><br><span class="line">    progress.style.width = <span class="string">`<span class="subst">$&#123;progressPercent&#125;</span>%`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//滑鼠點擊進度條移動(set progress bar)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setProgress</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//this指向progress-container 所以它的width就是216</span></span><br><span class="line">    <span class="keyword">const</span> width = <span class="built_in">this</span>.clientWidth;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 這個變數被指派了 滑鼠點擊progress-container身上的位置</span></span><br><span class="line">    <span class="keyword">const</span> clickX = e.offsetX;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> duration = audio.duration; <span class="comment">//音檔總時間</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//currentTime是指當下音檔的時間</span></span><br><span class="line">    <span class="comment">//progress bar的進度(是趴數)乘上音檔總時間 就是現在的進度!</span></span><br><span class="line">    audio.currentTime = (clickX / width) * duration;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//event listeners</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 這邊的click用來確定現在的音檔狀態是撥放還是暫停</span></span><br><span class="line"><span class="comment">// 如果是撥放則暫停如果是暫停則撥放</span></span><br><span class="line">playBtn.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> isPlaying = musicContainer.classList.contains(<span class="string">&#x27;play&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isPlaying) &#123;</span><br><span class="line">        pauseSong();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        playSong();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//上一首下一首切換change song</span></span><br><span class="line">prevBtn.addEventListener(<span class="string">&#x27;click&#x27;</span>, prevSong);</span><br><span class="line">nextBtn.addEventListener(<span class="string">&#x27;click&#x27;</span>, nextSong);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//time/song update(讓進度條隨著音檔跑)</span></span><br><span class="line">audio.addEventListener(<span class="string">&#x27;timeupdate&#x27;</span>, updateProgress);</span><br><span class="line"></span><br><span class="line"><span class="comment">//處理porgressbar進度條滑鼠點哪邊去哪邊(click on progress bar)</span></span><br><span class="line">progressContainer.addEventListener(<span class="string">&#x27;click&#x27;</span>, setProgress)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用ended事件處理audio讓它結束時觸發，並且執行nextSong 函式(song end)</span></span><br><span class="line">audio.addEventListener(<span class="string">&#x27;ended&#x27;</span>, nextSong);</span><br></pre></td></tr></table></figure></div><section class="post-copyright"></section><section class="post-tags"><div><span>Tag(s):</span> <span class="tag"><a href="/tags/HTML/"># HTML</a> <a href="/tags/CSS/"># CSS</a> <a href="/tags/JavaScript/"># JavaScript</a></span></div><div><a href="javascript:window.history.back();">back</a> <span>· </span><a href="/">home</a></div></section><section class="post-nav"><a class="prev" rel="prev" href="/2021/02/27/Infinite%20Scroll%20Posts/">實作練習-Infinite Scroll Posts</a> <a class="next" rel="next" href="/2021/02/27/%5B%E4%BD%9C%E5%93%81%5DExchange%20rate/">實作練習-Exchange rate</a></section></article></div></div><footer id="footer" class="footer"><div class="copyright"><span>© Chieh Liu | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span></div></footer></div></body></html>